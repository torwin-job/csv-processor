# CSV Обработчик (ООП + Фабрика)

## Описание

Этот проект предназначен для обработки CSV-файлов с использованием объектно-ориентированного подхода и паттерна "Фабрика". Поддерживается фильтрация, агрегация и сортировка данных через командную строку.

## Структура проекта

- `main.py` — точка входа, связывает все компоненты, парсит аргументы.
- `csv_reader.py` — класс для чтения CSV-файлов.
- `models.py` — модель строки CSV (может быть расширена).
- `filters.py` — абстрактный фильтр и конкретные фильтры (`>`, `<`, `=`).
- `aggregations.py` — абстрактная агрегация и реализации (`avg`, `min`, `max`).
- `factory.py` — фабрики для фильтров и агрегаций.

## Установка зависимостей

```bash
pip install tabulate
```

## Примеры использования

### 1. Вывести все строки CSV

```bash
python main.py --file data.csv
```

### 2. Фильтрация (например, цена больше 500)

```bash
python main.py --file data.csv --where "price>500"
```

### 3. Агрегация (например, среднее значение по цене)

```bash
python main.py --file data.csv --aggregate "price=avg"
```

Возможные агрегации: `avg`, `min`, `max`.

### 4. Сортировка (например, по цене по возрастанию или убыванию)

```bash
python main.py --file data.csv --order-by price:asc
python main.py --file data.csv --order-by price:desc
```

### 5. Комбинированное использование фильтрации и сортировки

```bash
python main.py --file data.csv --where "price>500" --order-by name:asc
```

Запустите тесты командой из корня проекта:

```bash
pytest tests/test_main.py 
```

Сортировка применяется после фильтрации, но до агрегации или вывода. По умолчанию сортировка по возрастанию (`asc`).

## Примечания
- Фильтрация и агрегация работают только по одному столбцу за раз.
- Для корректной работы столбцы должны содержать числовые значения (для агрегаций и сравнений).

## Расширение
Вы можете добавить новые фильтры или агрегации, создав соответствующие классы и зарегистрировав их во `factory.py`. 

## Инструменты для форматирования кода

### Проверка кода на стиль и ошибки (flake8)

```bash
flake8 .
```

### Автоматическое форматирование кода (black)

```bash
black .
```